<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Uniform Manifold Approximation and Projection (UMAP) dimension
 reduction for celda sce object — celdaUmap • celda</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Uniform Manifold Approximation and Projection (UMAP) dimension
 reduction for celda sce object — celdaUmap"><meta property="og:description" content="Embeds cells in two dimensions using umap based on
 a celda model. For celda_C sce objects, PCA on the normalized counts
 is used to reduce the number of features before applying UMAP. For celda_CG
 sce object, UMAP is run on module probabilities to reduce the number
 of features instead of using PCA. Module probabilities are square-root
 transformed before applying UMAP."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">celda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.13.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="https://www.camplab.net/celda" class="external-link">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/articles/installation.html">Installation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/articles/celda_pbmc3k.html">Celda - Analysis of PBMC3K</a>
    </li>
    <li>
      <a href="../articles/articles/decontX_pbmc4k.html">DecontX - Decontamination of PBMC4K</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/campbio/celda" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/campbio/celda/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Uniform Manifold Approximation and Projection (UMAP) dimension
 reduction for celda <code>sce</code> object</h1>
    <small class="dont-index">Source: <a href="https://github.com/campbio/celda/blob/HEAD/R/celdaUMAP.R" class="external-link"><code>R/celdaUMAP.R</code></a></small>
    <div class="hidden name"><code>celdaUmap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Embeds cells in two dimensions using <a href="https://rdrr.io/pkg/uwot/man/umap.html" class="external-link">umap</a> based on
 a celda model. For celda_C <code>sce</code> objects, PCA on the normalized counts
 is used to reduce the number of features before applying UMAP. For celda_CG
 <code>sce</code> object, UMAP is run on module probabilities to reduce the number
 of features instead of using PCA. Module probabilities are square-root
 transformed before applying UMAP.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">celdaUmap</span><span class="op">(</span></span>
<span>  <span class="va">sce</span>,</span>
<span>  useAssay <span class="op">=</span> <span class="st">"counts"</span>,</span>
<span>  altExpName <span class="op">=</span> <span class="st">"featureSubset"</span>,</span>
<span>  maxCells <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  minClusterSize <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  modules <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">12345</span>,</span>
<span>  nNeighbors <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  minDist <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  spread <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pca <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  initialDims <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  normalize <span class="op">=</span> <span class="st">"proportion"</span>,</span>
<span>  scaleFactor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transformationFun <span class="op">=</span> <span class="va">sqrt</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SingleCellExperiment</span></span>
<span><span class="fu">celdaUmap</span><span class="op">(</span></span>
<span>  <span class="va">sce</span>,</span>
<span>  useAssay <span class="op">=</span> <span class="st">"counts"</span>,</span>
<span>  altExpName <span class="op">=</span> <span class="st">"featureSubset"</span>,</span>
<span>  maxCells <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  minClusterSize <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  modules <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">12345</span>,</span>
<span>  nNeighbors <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  minDist <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  spread <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pca <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  initialDims <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  normalize <span class="op">=</span> <span class="st">"proportion"</span>,</span>
<span>  scaleFactor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transformationFun <span class="op">=</span> <span class="va">sqrt</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sce</dt>
<dd><p>A <a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a> object
returned by <a href="celda_C.html">celda_C</a>, <a href="celda_G.html">celda_G</a>, or <a href="celda_CG.html">celda_CG</a>.</p></dd>


<dt>useAssay</dt>
<dd><p>A string specifying which assay
slot to use. Default "counts".</p></dd>


<dt>altExpName</dt>
<dd><p>The name for the altExp slot
to use. Default "featureSubset".</p></dd>


<dt>maxCells</dt>
<dd><p>Integer. Maximum number of cells to plot. Cells will be
randomly subsampled if <code>ncol(sce) &gt; maxCells</code>. Larger numbers of cells
requires more memory. If NULL, no subsampling will be performed.
Default NULL.</p></dd>


<dt>minClusterSize</dt>
<dd><p>Integer. Do not subsample cell clusters below this
threshold. Default 100.</p></dd>


<dt>modules</dt>
<dd><p>Integer vector. Determines which features modules to use for
UMAP. If NULL, all modules will be used. Default NULL.</p></dd>


<dt>seed</dt>
<dd><p>Integer. Passed to <a href="https://withr.r-lib.org/reference/with_seed.html" class="external-link">with_seed</a>. For reproducibility,
a default value of 12345 is used. If NULL, no calls to
<a href="https://withr.r-lib.org/reference/with_seed.html" class="external-link">with_seed</a> are made.</p></dd>


<dt>nNeighbors</dt>
<dd><p>The size of local neighborhood used for
manifold approximation. Larger values result in more global
views of the manifold, while smaller values result in more
local data being preserved. Default 30.
See <a href="https://rdrr.io/pkg/uwot/man/umap.html" class="external-link">umap</a> for more information.</p></dd>


<dt>minDist</dt>
<dd><p>The effective minimum distance between embedded points.
Smaller values will result in a more clustered/clumped
embedding where nearby points on the manifold are drawn
closer together, while larger values will result on a more
even dispersal of points. Default 0.75.
See <a href="https://rdrr.io/pkg/uwot/man/umap.html" class="external-link">umap</a> for more information.</p></dd>


<dt>spread</dt>
<dd><p>The effective scale of embedded points. In combination with
<code>min_dist</code>, this determines how clustered/clumped the
 embedded points are. Default 1. See <a href="https://rdrr.io/pkg/uwot/man/umap.html" class="external-link">umap</a> for more information.</p></dd>


<dt>pca</dt>
<dd><p>Logical. Whether to perform
dimensionality reduction with PCA before UMAP. Only works for celda_C
<code>sce</code> objects.</p></dd>


<dt>initialDims</dt>
<dd><p>Integer. Number of dimensions from PCA to use as
input in UMAP. Default 50. Only works for celda_C <code>sce</code> objects.</p></dd>


<dt>normalize</dt>
<dd><p>Character. Passed to <a href="normalizeCounts.html">normalizeCounts</a> in
normalization step. Divides counts by the library sizes for each
cell. One of 'proportion', 'cpm', 'median', or 'mean'. 'proportion' uses
the total counts for each cell as the library size. 'cpm' divides the
library size of each cell by one million to produce counts per million.
'median' divides the library size of each cell by the median library size
across all cells. 'mean' divides the library size of each cell by the mean
library size across all cells.</p></dd>


<dt>scaleFactor</dt>
<dd><p>Numeric. Sets the scale factor for cell-level
normalization. This scale factor is multiplied to each cell after the
library size of each cell had been adjusted in <code>normalize</code>. Default
<code>NULL</code> which means no scale factor is applied.</p></dd>


<dt>transformationFun</dt>
<dd><p>Function. Applys a transformation such as 'sqrt',
'log', 'log2', 'log10', or 'log1p'. If <code>NULL</code>, no transformation will
be applied. Occurs after applying normalization and scale factor. Default
<code>NULL</code>.</p></dd>


<dt>cores</dt>
<dd><p>Number of threads to use. Default 1.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters to pass to <a href="https://rdrr.io/pkg/uwot/man/umap.html" class="external-link">umap</a>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>sce</code> with UMAP coordinates
 (columns "celda_UMAP1" &amp; "celda_UMAP2") added to</p>
<p></p>
<p><code>reducedDim(sce, "celda_UMAP")</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sceCeldaCG</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">umapRes</span> <span class="op">&lt;-</span> <span class="fu">celdaUmap</span><span class="op">(</span><span class="va">sceCeldaCG</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joshua Campbell, Shiyi Yang, Zhe Wang, Sean Corbett, Yusuke Koga.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

